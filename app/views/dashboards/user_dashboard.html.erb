<% content_for(:html_title) { 'NuflowPass Dashboard' } %>
<div class="page-wrapper">

    <nav>
      <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <button class="nav-link active" id="nav-events-tab" data-bs-toggle="tab" data-bs-target="#nav-events" type="button" role="tab" aria-controls="nav-events" aria-selected="true">MEUS ACESSOS</button>
        <button class="nav-link" id="nav-acc-info-tab" data-bs-toggle="tab" data-bs-target="#nav-acc-info" type="button" role="tab" aria-controls="nav-acc-info" aria-selected="false">INFORMAÇÕES DA CONTA</button>
      </div>
    </nav>

    <div class="tab-content mt-5" id="nav-tabContent">
      <div class="table-responsive tab-pane fade show active" id="nav-events" role="tabpanel" aria-labelledby="nav-events-tab">
        <table class="table align-middle table-dark table-borderless">
          <thead>
            <tr>
              <th scope="col">Nome</th>
              <th scope="col">Titularidade</th>
              <th scope="col">Data de início</th>
              <th scope="col">Data de término</th>
              <th scope="col">Bikepark</th>
              <th scope="col">Situação</th>
            </tr>
          </thead>
          <tbody class="">
            <% @passes.each do |pass| %>
              <tr>
                <td data-label="Nome"><%= pass.name %></td>
                <td data-label="Titularidade"><%= pass.holder_name %></td>
                <td data-label="Início"><%= pass.kind != "membership" ? pass.start_time.strftime("%d/%m/%Y - %H:%M") : "-" %></td>
                <td data-label="Fim"><%= pass.kind != "membership" ? pass.end_time.strftime("%d/%m/%Y - %H:%M") : "-" %></td>
                <td data-label="Bikepark"><%= pass.partner.name %></td>
                <td data-label="Status" class="<%= pass.status[:class] %>"><%= pass.status[:label] %></td>
                <td><%= link_to "Ver", pass_path(pass), class: "text-success" %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <div class="tab-pane fade" id="nav-acc-info" role="tabpanel" aria-labelledby="nav-acc-info-tab">
        <div class="text-center">
          
          <% if current_user.photo.attached? %>
            <%= cl_image_tag current_user.photo.key, height: 300, width: 300, crop: :fit %>
          <% end %>

          <%= simple_form_for @profile, :url => profiles_path, :method => :patch do |f| %>
            <div class="row">
              <div class="col-sm-12 col-md-6">
                <%= f.input :name %>
              </div>
              <div class="col-sm-12 col-md-6">
                <%= f.input :document_type, label: "Documento" %>
              </div>
              <div class="col-sm-12 col-md-6 mt-auto">
                <%= f.input :photo, as: :file %>
              </div>
              <div class="col-sm-12 col-md-6">
                <%= f.input :document_number, label: "Número" %>
              </div>
            </div>

            <%= f.submit "Editar", class: "btn btn-success mt-5 text-center" %>
          <% end %>
        </div>
      </div>
    </div>
    </div>

<% content_for(:html_title) { 'NuflowPass Dashboard' } %>
